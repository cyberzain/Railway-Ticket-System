<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>

<body>
    <!-- Field	Type
From Station	Text / Dropdown
To Station	Text / Dropdown
Journey Date	Date
Train Number	Text
Train Name	Text
Class	Dropdown (SL, 3A, 2A, 1A, CC)
Quota	Dropdown (General, Tatkal, Senior Citizen) -->

    <%- include('partials/sidebar') %>
        <!-- component -->
        <section class="max-w-4xl p-6 mx-auto bg-gray-600 rounded-md shadow-md dark:bg-gray-800 mt-20">
            <h1 class="text-xl font-bold text-white capitalize dark:text-white">Book Your Journay with us</h1>
            <form action="/api/train/bookTicket" method="post">
                <div class="grid grid-cols-1 gap-6 mt-4 sm:grid-cols-2">
                    <div>
                        <label class="text-white dark:text-gray-200" for="fStation">From Station</label>
                        <input name="fStation" id="fStation" type="text"
                            class="block w-full px-4 py-2 mt-2 text-gray-700 bg-white border border-gray-300 rounded-md dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 focus:border-blue-500 dark:focus:border-blue-500 focus:outline-none focus:ring">
                    </div>

                    <div>
                        <label class="text-white dark:text-gray-200" for="tStation">To Station</label>
                        <input id="tStation" type="text" name="tStation"
                            class="block w-full px-4 py-2 mt-2 text-gray-700 bg-white border border-gray-300 rounded-md dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 focus:border-blue-500 dark:focus:border-blue-500 focus:outline-none focus:ring">
                    </div>
                    <div>
                        <label class="text-white dark:text-gray-200" for="trainType">Routes</label>
                        <select id="trainRoute" name="trainRoute"
                            class="block w-full px-4 py-2 mt-2 text-gray-700 bg-white border border-gray-300 rounded-md dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 focus:border-blue-500 dark:focus:border-blue-500 focus:outline-none focus:ring">
                            <% trainRoute.forEach((value)=> { %>
                                <option value=<%=value.trainRoute %>><%= value.fromStation %> -<%= value.toStation %>
                                </option>

                                <% }) %>

                        </select>
                    </div>

                    <div>
                        <label class="text-white dark:text-gray-200" for="jDate">Journey Date</label>
                        <input id="jDate" type="date" name="jDate"
                        required
                            class="block w-full px-4 py-2 mt-2 text-gray-700 bg-white border border-gray-300 rounded-md dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 focus:border-blue-500 dark:focus:border-blue-500 focus:outline-none focus:ring">
                    </div>
                    <div>
                        <label class="text-white dark:text-gray-200" for="trainType">Select Train type</label>
                        <select id="trainType" name="trainType"
                            class="block w-full px-4 py-2 mt-2 text-gray-700 bg-white border border-gray-300 rounded-md dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 focus:border-blue-500 dark:focus:border-blue-500 focus:outline-none focus:ring">
                            <option value="General">General</option>
                            <option value="Express">Express</option>
                        </select>
                    </div>
                    <div>
                        <label class="text-white dark:text-gray-200" for="noP">No of Passengers</label>
                        <input id="noP" type="number" name="nop"
                        required
                            class="block w-full px-4 py-2 mt-2 text-gray-700 bg-white border border-gray-300 rounded-md dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 focus:border-blue-500 dark:focus:border-blue-500 focus:outline-none focus:ring">
                    </div>
                    <div>
                        <label class="text-white dark:text-gray-200" for="tAmount">Total Amount</label>
                        <input id="tAmount" type="number" name="tAmount"
                            class="block w-full px-4 py-2 mt-2 text-gray-700 bg-white border border-gray-300 rounded-md dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 focus:border-blue-500 dark:focus:border-blue-500 focus:outline-none focus:ring">
                    </div>

                </div>

                <div class="flex justify-end mt-4">
                    <button
                        class="px-6 py-2 leading-5 text-white transition-colors duration-200 transform bg-blue-500 rounded-md hover:bg-black-700 focus:outline-none focus:bg-gray-600 cursor-pointer">Generate
                        Ticket</button>
                </div>
            </form>
        </section>
        <% if(showTicket){ %>
           

            
            <div
                id="ticketDiv"
                class="max-w-md mx-auto mt-20 bg-white border-2 border-dashed border-gray-400 rounded-lg shadow-lg p-5 font-sans">

                <!-- Header -->
                <div class="text-center border-b pb-3 mb-4">
                    <h2 class="text-xl font-bold text-gray-800">GENERAL TICKET</h2>
                    <p class="text-sm text-gray-500">Indian Railways</p>
                </div>

                <!-- Ticket Info -->
                <div class="grid grid-cols-2 gap-y-3 text-sm text-gray-700">

                    <div>
                        <p class="text-gray-500">From</p>
                        <p class="font-semibold"><%= ticket.fromStation %></p>
                    </div>

                    <div>
                        <p class="text-gray-500">To</p>
                        <p class="font-semibold"><%= ticket.toStation %></p>
                    </div>

                    <div>
                        <p class="text-gray-500">Passengers</p>
                        <p class="font-semibold"><%= ticket.nop %></p>
                    </div>

                    <div>
                        <p class="text-gray-500">Total Amount</p>
                        <p class="font-semibold text-green-600"><%= ticket.totalAmount %></p>
                    </div>

                    <div>
                        <p class="text-gray-500">Distance</p>
                        <p class="font-semibold"><%= ticket.distance %></p>
                    </div>

                    <div>
                        <p class="text-gray-500">Train Route ID</p>
                        <p class="font-semibold"><%= ticket.trainRoute %></p>
                    </div>

                    <div>
                        <p class="text-gray-500">Journey Date</p>
                        <p class="font-semibold"><%= ticket. jDate %></p>
                    </div>

                    <div>
                        <p class="text-gray-500">PNR</p>
                        <p class="font-semibold tracking-widest"><%= ticket.pnr %></p>
                    </div>

                    <div class="col-span-2">
                        <p class="text-gray-500">UTS No</p>
                        <p class="font-semibold tracking-widest"><%= ticket.utsNo %></p>
                    </div>

                </div>

                <!-- Footer -->
                <div class="border-t mt-4 pt-3 text-center text-xs text-gray-500">
                    <p>This ticket is valid only on the date of journey</p>
                    <p class="mt-1 font-semibold text-gray-700">Happy Journey ðŸš†</p>
                </div>
                    <div class="flex justify-end mt-4">
                    <button
                        onclick="closeTicket()";
                        class="px-6 py-2 leading-5 text-white transition-colors duration-200 transform bg-blue-500 rounded-md hover:bg-black-700 focus:outline-none focus:bg-gray-600 cursor-pointer">
                        Close</button>
                </div>
            </div>


            <% } %>
<script>
    
    function closeTicket(){
        const ticketDiv = document.querySelector("#ticketDiv");
        ticketDiv.style.display = "none";
    }
</script>
</body>

</html>
<!-- 

subTotal = 0.5 * km;
totalAmount = subTotal * noP;
50-100 km 30 100>50>150> 70> 200x -->